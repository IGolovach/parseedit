<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
  });
</script>
	<script> 
function tag (x, y, z) 
{
	if (document.selection) 
	with (document.selection.createRange ()) {text = y + text + z} 
	else if (x.selectionStart >= 0) with (x) 
	{ 
		var u = scrollTop, v = scrollLeft, t = value, 
		s = selectionStart, l = selectionEnd - s; focus(); 
		value = t.substr (0, s) + y + t.substr (s, l) + z + t.substr (s + l); 
		selectionStart = selectionEnd = s, scrollTop = u, scrollLeft = v;
	} 
	else x.value += y + z; x.focus (); 
} 

function myFunc(y) 
{ 
	var z = true, y = window.event || y, x = y.target || y.srcElement, 
	w = {'66' : 'b}', '85' : 'u}', '73' : 'i}'}; 
	if (y.ctrlKey && w [y.keyCode]){
		z = false; 
		tag (document.getElementById ('m'), '{' + w [y.keyCode], '{/' + w [y.keyCode])
	} 
	return z; 
} 
</script>
<script type="text/javascript" src="../MathJax.js?config=TeX-AMS_HTML-full"></script>
   <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; }
      form { background: #045FB4; padding: 3px;  bottom: 0; width: 100%; border-radius: 5px;}
      form input { border: 0; padding: 10px; width: 90%; margin-right: .5%; }
      form button { width: 8%; background: rgb(130, 224, 255); border-radius: 5px; padding: 10px; }
      #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages li { padding: 5px 10px; }
      #messages li:nth-child(odd) { background: #eee; }
article.accordion
{
	display: block;
	width: 100%;
	padding: 0.5em 0.5em 1px 0.5em;
	margin: 0 auto;
	background-color: #58ACFA;
	border-radius: 5px;
	box-shadow: 0 3px 3px rgba(0,0,0,0.3);
}

article.accordion section
{
	display: block;
	width: 90%;
	height: 2em;
	padding: 0 1em;
	margin: 0 0 0.5em 0;
	color: #333;
	background-color: #045FB4;
	overflow: hidden;
	border-radius: 3px;
}

article.accordion section div#math_block{height: 80%;overflow: auto;}

article.accordion section h1
{
	font-size: 1em;
	font-weight: bold;
	width: 100%;
	line-height: 2em;
	padding: 0;
	margin: 0;
	color: #ddd;
}

article.accordion section h1 a
{
	display: block;
	width: 100%;
	line-height: 2em;
	text-decoration: none;
	color: inherit;
	outline: 0 none;
}
article.accordion section:target
{
	height: 30em;
	background-color: #fff;
}

article.accordion section:target h1
{
	font-size: 1.6em;
	color: #333;
}
article.accordion section,
article.accordion section h1
{
	-webkit-transition: all 1s ease;
	-moz-transition: all 1s ease;
	-ms-transition: all 1s ease;
	-o-transition: all 1s ease;
	transition: all 1s ease;
}
.block1 {
      background:url(https://raw.githubusercontent.com/IGolovach/parseedit/master/images/Fsprite.png);
}
.block2 {
      background:url(https://raw.githubusercontent.com/IGolovach/parseedit/master/images/Ssprite.png);
}
.functions{
	width: 40;
	height: 25;
}
.letters{
	width: 8; 
	height: 18; 
}
.functions img:hover, .letters img:hover{
	border: 2px solid blue;
	cursor: pointer;
	padding: 3px;
}
    </style>
</head>
<body>
  
  <article class="accordion">

	<section id="acc1">
		<h1><a href="#acc1">MathChat: About</a></h1>
		<p>Разработанный чат предназначен для обмена текстовыми сообщениями, а также сообщениями, которые содержат математические формулы. С помощью разработанного приложения можно проводить
обучение через интернет, отображение формул на проекторе в реальном времени, проводить контроль знаний студентов. </p>
	</section>	
	<section id="acc2">
		<h1><a href="#acc2">MathChat: Chat</a></h1>
		<div id="math_block">
		<ul id="messages"></ul>
    <form action="">
      <input id="m" autocomplete="off" /><button></button>
	  	<div class="functions" style="display: inline"> 
		<img src="images/sin.png" onclick="tag (document.getElementById ('m'), '\\sin','')" alt="Жирный CTRL+B" title="Жирный CTRL+B"      >
		<img src="images/cos.png" onclick="tag (document.getElementById ('m'), '\\cos','')" alt="Курсив CTRL+I" title="Курсив CTRL+I"      >
		<img src="images/tan.png" onclick="tag (document.getElementById ('m'), '\\tan','')" alt="" title="">
		<img src="images/sec.png" onclick="tag (document.getElementById ('m'), '\\sec','')" alt="" title="">
		<img src="images/csc.png" onclick="tag (document.getElementById ('m'), '\\csc','')" alt="" title="">
		<img src="images/cot.png" onclick="tag (document.getElementById ('m'), '\\cot','')" alt="" title="">
		<img src="images/sinh.png" onclick="tag (document.getElementById ('m'), '\\sinh','')" alt="" title="">
		<img src="images/cosh.png" onclick="tag (document.getElementById ('m'), '\\cosh','')" alt="" title="">
		<img src="images/tanh.png" onclick="tag (document.getElementById ('m'), '\\tanh','')" alt="" title="">
		<img src="images/coth.png" onclick="tag (document.getElementById ('m'), '\\coth','')" alt="" title="">
	</div>
	<br>
	<div class="functions" style="display: inline"> 
		<img src="images/arcsin.png" onclick="tag (document.getElementById ('m'), '\\arcsin','')" alt="Жирный CTRL+B" title="Жирный CTRL+B"      >
		<img src="images/arccos.png" onclick="tag (document.getElementById ('m'), '\\arccos','')" alt="Курсив CTRL+I" title="Курсив CTRL+I"      >
		<img src="images/arctan.png" onclick="tag (document.getElementById ('m'), '\\arctan','')" alt="" title="">
		<img src="images/arcsec.png" onclick="tag (document.getElementById ('m'), '\\arcsec','')" alt="" title="">
		<img src="images/arccsc.png" onclick="tag (document.getElementById ('m'), '\\arccsc','')" alt="" title="">
		<img src="images/arccot.png" onclick="tag (document.getElementById ('m'), '\\arccot','')" alt="" title="">
		<br>
		<img src="images/sin_1.png" onclick="tag (document.getElementById ('m'), '\\sin^{-1}','')" alt="" title="">
		<img src="images/cos_1.png" onclick="tag (document.getElementById ('m'), '\\cos^{-1}','')" alt="" title="">
		<img src="images/tan_1.png" onclick="tag (document.getElementById ('m'), '\\tan^{-1}','')" alt="" title="">
		<img src="images/sinh_1.png" onclick="tag (document.getElementById ('m'), '\\sinh^{-1}','')" alt="" title="">
		<img src="images/cosh_1.png" onclick="tag (document.getElementById ('m'), '\\cosh^{-1}','')" alt="" title="">
		<img src="images/tanh_1.png" onclick="tag (document.getElementById ('m'), '\\tanh^{-1}','')" alt="" title="">
	</div>
	<br>
	<div class="letters" style="display: inline">
		<img src="images/alpha.png" onclick="tag (document.getElementById ('m'), '\\alpha','')" alt="" title="">
		<img src="images/ALPHAbig.png" onclick="tag (document.getElementById ('m'), '\\Alpha','')" alt="" title="">
		<img src="images/beta.png" onclick="tag (document.getElementById ('m'), '\\beta','')" alt="" title="">
		<img src="images/BETAbig.png" onclick="tag (document.getElementById ('m'), '\\Beta','')" alt="" title="">
		<img src="images/gamma.png" onclick="tag (document.getElementById ('m'), '\\gamma','')" alt="" title="">
		<img src="images/GAMMAbig.png" onclick="tag (document.getElementById ('m'), '\\Gamma','')" alt="" title="">
		<img src="images/pi.png" onclick="tag (document.getElementById ('m'), '\\pi','')" alt="" title="">
		<img src="images/PIbig.png" onclick="tag (document.getElementById ('m'), '\\Pi','')" alt="" title="">
		<img src="images/varPhi.png" onclick="tag (document.getElementById ('m'), '\\varphi','')" alt="" title="">
		<img src="images/Phi.png" onclick="tag (document.getElementById ('m'), '\\Phi','')" alt="" title="">
		<img src="images/theta.png" onclick="tag (document.getElementById ('m'), '\\theta','')" alt="" title="">
	</div>
	
	<br><br><div class="block1" style="background-position: -0px -0px; width: 15px; height: 34px">&nbsp;</div>
<div class="block1" style="background-position: -0px -44px; width: 17px; height: 35px">&nbsp;</div>
<div class="block1" style="background-position: -0px -89px; width: 52px; height: 35px">&nbsp;</div>
<div class="block1" style="background-position: -0px -134px; width: 49px; height: 35px">&nbsp;</div>
<div class="block1" style="background-position: -0px -179px; width: 49px; height: 34px">&nbsp;</div>
<div class="block1" style="background-position: -0px -223px; width: 48px; height: 35px">&nbsp;</div>
<div class="block1" style="background-position: -0px -268px; width: 50px; height: 35px">&nbsp;</div>
<div class="block1" style="background-position: -0px -313px; width: 54px; height: 35px">&nbsp;</div>
<div class="block1" style="background-position: -0px -358px; width: 17px; height: 35px">&nbsp;</div>
<br><br><div style="background-position: -0px -403px; width: 11px; height: 33px">&nbsp;</div>
<div class="block1" style="background-position: -0px -446px; width: 26px; height: 26px">&nbsp;</div>
<div class="block1" style="background-position: -0px -482px; width: 46px; height: 46px">&nbsp;</div>
<div class="block1" style="background-position: -0px -538px; width: 39px; height: 26px">&nbsp;</div>
<div class="block1" style="background-position: -0px -574px; width: 55px; height: 45px">&nbsp;</div>
<div class="block1" style="background-position: -0px -629px; width: 25px; height: 26px">&nbsp;</div>
<div class="block1" style="background-position: -0px -665px; width: 36px; height: 26px">&nbsp;</div>
<div class="block1" style="background-position: -0px -701px; width: 27px; height: 26px">&nbsp;</div>
<div class="block1" style="background-position: -0px -737px; width: 20px; height: 30px">&nbsp;</div>
<div class="block1" style="background-position: -0px -777px; width: 20px; height: 30px">&nbsp;</div>
<<div class="block1" style="background-position: -0px -817px; width: 15px; height: 29px">&nbsp;</div>
	
	<br><br><div class="block2" style="background-position: -0px -0px; width: 15px; height: 29px">&nbsp;</div>
<div class="block2" style="background-position: -0px -39px; width: 17px; height: 33px">&nbsp;</div>
<div class="block2" style="background-position: -0px -82px; width: 14px; height: 35px">&nbsp;</div>
<div class="block2" style="background-position: -0px -127px; width: 15px; height: 35px">&nbsp;</div>
<div class="block2" style="background-position: -0px -172px; width: 27px; height: 26px">&nbsp;</div>
<div class="block2" style="background-position: -0px -208px; width: 34px; height: 26px">&nbsp;</div>
<div class="block2" style="background-position: -0px -244px; width: 47px; height: 45px">&nbsp;</div>
<br><br><div class="block2" style="background-position: -0px -299px; width: 36px; height: 25px">&nbsp;</div>
<div class="block2" style="background-position: -0px -334px; width: 46px; height: 44px">&nbsp;</div>
<div class="block2" style="background-position: -0px -388px; width: 34px; height: 35px">&nbsp;</div>
<div class="block2" style="background-position: -0px -433px; width: 30px; height: 26px">&nbsp;</div>
<div class="block2" style="background-position: -0px -469px; width: 51px; height: 45px">&nbsp;</div>
<div class="block2" style="background-position: -0px -524px; width: 37px; height: 26px">&nbsp;</div>
<div class="block2" style="background-position: -0px -560px; width: 50px; height: 45px">&nbsp;</div>
<div class="block2" style="background-position: -0px -615px; width: 15px; height: 34px">&nbsp;</div>
<br><br><div class="block2" style="background-position: -0px -659px; width: 15px; height: 34px">&nbsp;</div>
	<br> 
	
    </form></div>
	</section>	
</article>

    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      var socket = io();
      var rand=new Date(); 
		var my='a'+(rand.getSeconds())%100;      
      $('form').submit(function(){
        socket.emit('chat message', $('#m').val());
        $('#m').val('');
        return false;
      });
      socket.on('chat message', function(msg){
      rand=new Date(); 
		my='a'+(rand.getSeconds())%100;
		msg2='<span id="one">'+msg+'</span><br><br><br>';
		
 var div = document.createElement('div') ;
 div.innerHTML = msg2;
		$('#messages').append(div);
      katex.render(msg,one);
      document.getElementById('one').id=my;
      });
    </script>
  </body>
</html>
